<!-- travel_app/templates/travel_app/profile.html -->
{% extends 'travel_app/base.html' %}

{% block title %}Profile | Find Your Travel{% endblock %}

{% block content %}
    <div id="hero" class="hero overlay subpage-hero blog-hero">
        <div class="hero-content">
            <div class="hero-text">
                <h1>–ü—Ä–æ—Ñ–∏–ª—å</h1>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item active">–ü—Ä–∏–≤–µ—Ç, {{ user.username }}</li>
                </ol>
            </div>
        </div>
    </div>

    <main id="main" class="site-main">
        <section class="site-section subpage-site-section section-blog">
            <div class="container">
                <div class="row">
                    <div class="col-md-8">
                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active">
                                <a href="#saved-locations" aria-controls="saved-locations" role="tab" data-toggle="tab">–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏</a>
                            </li>
                            <li role="presentation">
                                <a href="#my-reviews" aria-controls="my-reviews" role="tab" data-toggle="tab">–ú–æ–∏ –æ—Ç–∑—ã–≤—ã</a>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane active" id="saved-locations">
                                <article class="blog-post">
                                    <div class="post-content">
                                        <h3 class="post-title">–í–∞—à–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏:</h3>
                                        {% if user.userprofile.results.all %}
                                            <ul>
                                                {% for result in user.userprofile.results.all %}
                                                    <li>
                                                        <span>{{ result.recommendation }}</span>
                                                        <form method="post" action="{% url 'delete_result' result.id %}" style="display:inline;">
                                                            {% csrf_token %}
                                                            <button type="submit" class="delete-icon">üóë</button>
                                                        </form>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        {% else %}
                                            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π.</p>
                                        {% endif %}
                                    </div>
                                </article>
                            </div>
                            <div role="tabpanel" class="tab-pane" id="my-reviews">
                                <article class="blog-post">
                                    <div class="post-content">
                                        <h3 class="post-title">–ú–æ–∏ –æ—Ç–∑—ã–≤—ã:</h3>
                                        {% if user.userprofile.reviews.all %}
                                            <ul>
                                                {% for review in user.userprofile.reviews.all %}
                                                    <li>
                                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                                            <div>
                                                                <h4>{{ review.destination.recommendation }}</h4>
                                                                <p>–†–µ–π—Ç–∏–Ω–≥: {{ review.rating }}</p>
                                                                <p>{{ review.text }}</p>
                                                                <p>–î–∞—Ç–∞: {{ review.created_at }}</p>
                                                            </div>
                                                            <form method="post" action="{% url 'delete_review' review.id %}" style="display: inline;">
                                                                {% csrf_token %}
                                                                <input type="hidden" name="next" value="{{ request.path }}">
                                                                <button type="submit" class="delete-icon">üóë</button>
                                                            </form>
                                                        </div>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        {% else %}
                                            <p>–í—ã –µ—â–µ –Ω–µ –æ—Å—Ç–∞–≤–ª—è–ª–∏ –æ—Ç–∑—ã–≤–æ–≤.</p>
                                        {% endif %}
                                    </div>
                                </article>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
{% endblock %}
